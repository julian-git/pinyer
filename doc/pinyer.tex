\documentclass[11pt]{amsart}
\usepackage{a4wide}
\usepackage[latin1]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage{paralist}
\begin{document}

\title[El pinyer gra\c cienc] {El pinyer gra\c cienc\\\ \\ 
  una herramienta para\\ montar pinyes de castells\\\ \\
  desarrollado en el barrio de Gr\`acia, Barcelona
}
\author{Julian Pfeifle}

%\includegraphics[width=3cm]{../www/img/cvg} 
\hfill
\includegraphics[width=3cm]{../www/img/math-inside}

\bigskip
\maketitle

\section{Introducción}

\textsf{\bfseries El pinyer gra\c cienc} es una
aplicación web diseñada para ayudar a montar pinyes de castells, y
pensada para ser utilizada por varias collas. Internamente, el código
se formula en inglés, y dispondrá de varios ficheros de traducción
para que el idioma de la interfície con el usuario pueda configurarse
libremente. La idea detrás de este planteamiento es facilitar,
pensando en el futuro medio y lejano, que la práctica castillera se
pueda extender a otros ambientes geográficos fuera de Catalunya, como
está sucediendo por ejemplo en Canadá.

\medskip En líneas generales, consiste de una base de datos y un
programa de optimización matemática instalados en un servidor fijo
(por ejemplo, de la colla CVG). Se puede acceder a él mediante
cualquier navegador (Firefox, Opera, Chrome, Explorer, etc),
garantizando así al máximo la independencia tanto del sistema
operativo como del tipo de dispositivo (móvil, tableta, PC, etc) que
se usa para conectarse.

\medskip
La aplicación se sustenta en
\begin{compactitem}
\item varias medidas corporales que se toman de los integrantes de
  cada colla;
\item un plano general de cada piña de castell;
\item ciertas restricciones que han de satisfacerse entre los
  integrantes de cada piña concreta;
\item y la disponibilidad de cada castellero en el momento concreto de
  ejecutar la optimización, Por ejemplo, puede no asistir al ensayo, o
  puede tener otra función que le impida formar parte de la pinya.
\end{compactitem}

Además, la junta técnica puede decidir que ciertas posiciones se hayan
de ocupar necesariamente por ciertos castilleros.

A partir de estos datos, se genera un fichero fuente para el programa
de optimización, se ejecuta este programa para encontrar la mejor
disposición de los castilleros en la piña, y se convierte la salida en
una distribución concreta, que se visualiza en el navegador.

\section{Preparación y ejecución de la optimización}

Con antelación al ensayo o a la actuación, cada colla mete los datos
de sus castellers en la base de datos, y diseña varios planos
generales de castells (3de8, 2de8f, etc). Estos datos serán bastante
detallados. 

\subsection{Preparación de datos de la colla} 

Para cada castillero, se apuntan varias medidas corporales y una
estimación general de su fortaleza física en el momento
presente. Estos datos incluyen, entre otros

\begin{compactitem}
\item la altura a manos alzadas y la distancia entre hombro y codo y
  entre codo y muñeca (en los casos de mans y vents), la altura de
  hombros (para todos), de la axila (de los baixos), de la cadera (de
  los segons);
\item el peso (para todos);
\item la circunferencia de pecho y barriga (todos);
\item una estimación de la fortaleza física y el aguante psíquico
  (habrá que pensar cuál es la mejor manera de evaluar esos
  parámetros).
\end{compactitem}

\subsection{Preparación de los datos del castillo}

Para cada plano de un castell, se incorporan las restricciones que han
de respetarse para cada pinya concreta. Tales restricciones pueden ser
de medidas corporales, como por ejemplo
\begin{compactitem}
\item que el valor de
    \[
       (\text{altura hombros baix})  + (\text{altura trasero segon}) - (\text{altura
         manos alzadas $1^a$ mà})
  \]
  varíe entre unos valores máximos y mínimos permitidos; 
\item que el peso mínimo de un baix haya de ser por lo menos cierto
  valor;
\item o que el total de la anchura de hombros de los castilleros en un
  ``quesito'' haya de ser aproximadamente cierto valor; etc.
\item También se pueden incorporar restricciones como la
  incompatibilidad entre ciertos castilleros, etc.
\end{compactitem}

La arquitectura del software será lo más flexible que sea posible,
para dejar la máxima libertad a las juntas técnicas a la hora de
diseñar sus pinyas.

De hecho, habrá que implementar un editor de restricciones, para que
cada junta técnica pueda introducir las restricciones más adecuadas
para cada castell, y para el nivel general de conocimiento técnico y
fortaleza de la colla.


\section{Los componentes del software}


A continuación describiremos los elementos del software con un poco más de detalle.

\subsection{Base de datos}

Los datos de los castilleros residen en una base de datos MySQL con el
esquema de la Figura~\ref{fig:pinyer-db}.
\begin{figure}[htbp]
  \centering
  \includegraphics[width=\linewidth]{../sql/pinyer-db}
  \caption{Las diferentes tablas y las relaciones entre sus campos clave}
  \label{fig:pinyer-db}
\end{figure}

Las entradas en estas tablas se gestionan via requests web. Ello
garantiza que todos los miembros de la junta técnica tengan acceso a
los mismos datos en todo momento, evitando confusiones porque un
miembro de la junta no se haya dado cuenta de que cierto castillero ha
dejado de estar disponible en el ensayo, etc.

\subsection{Servidor web}

Una serie de ficheros en Python. La implementación está bastante
completa. 

\section{Necesidades}

Lo más urgente en este momento es implementar un editor de
restricciones, que trabaje directamente sobre el fichero svg mostrado
en el servidor, y que guarde las relaciones introducidas por el
usuario en formato xml.

\end{document}
